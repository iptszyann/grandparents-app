<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>è¦ªæƒ…è¨˜æ†¶é¤¨</title>
    <style>
        :root {
            --bg-color: #FFF9E3;
            --btn-game1: #FFB6C1;
            --btn-game2: #98FB98;
            --btn-game3: #87CEFA;
            --text-dark: #4A2C2C;
        }

        body {
            font-family: 'Microsoft JhengHei', sans-serif;
            background-color: var(--bg-color);
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        #app-container {
            width: 100%;
            max-width: 500px;
            height: 95vh;
            background: white;
            border: 8px solid #FFD700;
            border-radius: 30px;
            position: relative;
            display: flex;
            flex-direction: column;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .screen { display: none; flex-direction: column; padding: 20px; height: 100%; box-sizing: border-box; text-align: center; }
        .active { display: flex; }

        h1 { color: var(--text-dark); font-size: 32px; margin: 10px 0; }
        .status-text { font-size: 22px; color: #E67E22; font-weight: bold; margin-bottom: 10px; min-height: 30px; }

        .menu-btn { padding: 25px; margin: 10px 0; border: none; border-radius: 20px; font-size: 28px; font-weight: bold; cursor: pointer; box-shadow: 0 6px #ccc; }
        .btn-1 { background-color: var(--btn-game1); }
        .btn-2 { background-color: var(--btn-game2); }
        .btn-3 { background-color: var(--btn-game3); }

        .back-btn { padding: 15px; background: #FFD700; border: none; border-radius: 15px; font-size: 22px; font-weight: bold; cursor: pointer; margin-top: auto; color: #4A2C2C; box-shadow: 0 4px #DAA520; }

        .game-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; flex-grow: 1; }
        .card { aspect-ratio: 1; background-color: #FFD700; border-radius: 12px; display: flex; justify-content: center; align-items: center; font-size: 30px; border: 3px solid white; box-shadow: 0 4px #DAA520; overflow: hidden; }
        .card img { width: 100%; height: 100%; object-fit: cover; }
        .card.matched { visibility: hidden; }

        .match-container { display: flex; justify-content: space-between; flex-grow: 1; padding: 10px 0; }
        .match-column { display: flex; flex-direction: column; gap: 15px; width: 45%; }
        .match-item { aspect-ratio: 1; border: 5px solid #eee; border-radius: 15px; overflow: hidden; cursor: pointer; }
        .match-item img { width: 100%; height: 100%; object-fit: cover; }
        .match-item.selected { border-color: #FFD700; transform: scale(1.05); }
        .match-item.correct { border-color: #98FB98; opacity: 0.5; pointer-events: none; }

        #album-img, #album-video { max-width: 90%; max-height: 300px; border: 8px solid white; border-radius: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); display: none; }
    </style>
</head>
<body>

<div id="app-container">
    
    <div id="menu-screen" class="screen active">
        <h1>â¤ï¸ è¦ªæƒ…è¨˜æ†¶é¤¨ â¤ï¸</h1>
        <button class="menu-btn btn-1" onclick="showScreen('game1-screen'); initGame1();">ğŸ´ è¨˜æ†¶ç¿»ç¿»çœ‹</button>
        <button class="menu-btn btn-2" onclick="showScreen('game2-screen'); initGame2();">ğŸ”— èª°é•·å¤§äº†ï¼Ÿ</button>
        <button class="menu-btn btn-3" onclick="showScreen('game3-screen'); initGame3();">ğŸ“¸ çœ‹çœ‹å­©å­å€‘</button>
        
        <div style="margin-top: 50px; padding-top: 40px;">
            <p style="font-size: 18px; color: #888; margin-bottom: 5px;">æœ€æ„›å…¬å…¬å©†å©†çš„å®¶äººå€‘</p>
            <img src="family_home.jpg" style="width: 100%; height: 150px; object-fit: cover; border-radius: 15px; border: 4px solid white; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
        </div>
    </div>

    <div id="game1-screen" class="screen">
        <h1>ğŸ´ è¨˜æ†¶ç¿»ç¿»çœ‹</h1>
        <div id="game1-status" class="status-text">æ‰¾å‡ºå…©å¼µä¸€æ¨£çš„ï¼</div>
        <div class="game-grid" id="game1-board"></div>
        <button class="back-btn" onclick="showScreen('menu-screen')">ğŸ  å›ä¸»é¸å–®</button>
    </div>

    <div id="game2-screen" class="screen">
        <h1>ğŸ”— èª°é•·å¤§äº†ï¼Ÿ</h1>
        <div id="game2-status" class="status-text">æŠŠå°æ™‚å€™å’Œç¾åœ¨é€£èµ·ä¾†</div>
        <div class="match-container">
            <div class="match-column" id="left-col"></div>
            <div class="match-column" id="right-col"></div>
        </div>
        <button class="back-btn" onclick="showScreen('menu-screen')">ğŸ  å›ä¸»é¸å–®</button>
    </div>

    <div id="game3-screen" class="screen">
        <h1>ğŸ“¸ çœ‹çœ‹å­©å­å€‘</h1>
        <div style="flex-grow: 1; display: flex; flex-direction: column; justify-content: center; align-items: center;">
            <img id="album-img" src="">
            <video id="album-video" controls playsinline></video>
            <p id="album-text" style="font-size: 22px; font-weight: bold; margin: 15px 0; padding: 0 10px;"></p>
            <div style="display: flex; gap: 20px;">
                <button class="back-btn" onclick="prevPhoto()" style="width: 120px; font-size: 18px;">â¬…ï¸ ä¸Šä¸€å¼µ</button>
                <button class="back-btn" onclick="nextPhoto()" style="width: 120px; font-size: 18px;">ä¸‹ä¸€å¼µ â¡ï¸</button>
            </div>
        </div>
        <button class="back-btn" onclick="showScreen('menu-screen')">ğŸ  å›ä¸»é¸å–®</button>
    </div>

</div>

<script>
    const game1Library = ['father.jpg','grandma.jpg','grandpa.PNG','me.jpg','mother.jpg','sis.jpg','Nicole.PNG','YM.PNG','YJ.PNG','Ryan.jpeg'];
    
    const game2Pairs = [
        { id: 1, child: 'me_young.jpg', adult: 'me.jpg' },
        { id: 2, child: 'sis_young.jpg', adult: 'sis.jpg' },
        { id: 3, child: 'mother_young.jpg', adult: 'mother.jpg' },
        { id: 4, child: 'father_young.jpg', adult: 'father.jpg' }
    ];

    const albumLibrary = [
        { type: 'image', url: 'family5.jpg', desc: 'åœ¨å…¬å…¬å©†å©†é¢å‰ï¼Œæˆ‘å€‘æ°¸é æ˜¯å¯ä»¥æ’’å¬Œçš„å­©å­ã€‚' },
        { type: 'image', url: 'me.jpg', desc: 'åœ¨å¸Œè‡˜çš„æ˜•æ˜•ğŸ˜' },
        { type: 'image', url: 'sis.jpg', desc: 'åœ¨å¸Œè‡˜çš„æ™´æ™´ğŸ˜›' },
        { type: 'image', url: 'mother.jpg', desc: 'åª½åª½çš„å„ªé›…ï¼Œæ˜¯æ™‚å…‰ä¹Ÿå¸¶ä¸èµ°çš„å¾å®¹ã€‚' },
        { type: 'image', url: 'family1.jpg', desc: 'å¹¸ç¦å°±æ˜¯ï¼Œé™ªæ‚¨å€‘æ…¢æ…¢åƒé£¯ï¼Œè½æ‚¨å€‘æ…¢æ…¢èªªè©±ã€‚' },
        { type: 'image', url: 'old.jpg', desc: 'æ‚¨å€‘çš„æ•…äº‹ï¼Œæ˜¯æˆ‘è½éæœ€å‹•äººçš„ç«¥è©±ã€‚' },
        { type: 'image', url: 'popo2.jpg', desc: 'å…¨ä¸–ç•Œæœ€å¯æ„›çš„å©†å©†ï¼Œåœ¨æˆ‘å®¶ã€‚' },
        { type: 'image', url: 'nicolegrandpa.jpg', desc: 'ç¥æ‚¨èº«é«”å¥åº·ï¼Œå¤©å¤©é–‹å¿ƒ' },
        { type: 'image', url: 'sweet2.jpg', desc: 'æœ€å®‰å¿ƒçš„ç•«é¢ï¼Œæ˜¯æ‚¨å€‘å¥åº·å¹³å®‰çš„ç¬‘å®¹ã€‚' },
        { type: 'image', url: 'selfie.jpg', desc: 'åœ˜åœ“ï¼Œå°±æ˜¯ç¯€æ—¥æœ€å¥½çš„ç¦®ç‰©ã€‚' },
        { type: 'image', url: 'family2.JPG', desc: 'å¹¸ç¦çš„æ¨¡æ¨£' },
        { type: 'image', url: 'family3.jpg', desc: 'æœ‰ä½ å€‘åœ¨ï¼Œå°±æ˜¯æœ€å¥½çš„æ™‚å…‰ã€‚' },
        { type: 'image', url: 'family4.JPG', desc: 'ä¸‰é¤å››å­£ï¼Œæº«æš–æœ‰è¶£ã€‚' },
        { type: 'image', url: '4ppl.jpg', desc: 'ğŸ“ğŸ‰ğŸŠâ¤ï¸' },
        { type: 'image', url: 'graduation.JPG', desc: 'é€™ä¸æ˜¯çµæŸï¼Œè€Œæ˜¯æ›´ç²¾å½©çš„é–‹å§‹ã€‚' }
    ];

    let albumIndex = 0;

    function showScreen(id) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        // åˆ‡æ›è¢å¹•æ™‚åœæ­¢å½±ç‰‡
        const video = document.getElementById('album-video');
        video.pause();
    }

    /* --- éŠæˆ²ä¸€ --- */
    let g1Flipped = [];
    let g1Matched = 0;
    function initGame1() {
        const board = document.getElementById('game1-board');
        board.innerHTML = ''; g1Flipped = []; g1Matched = 0;
        document.getElementById('game1-status').innerText = "æ‰¾å‡ºå…©å¼µä¸€æ¨£çš„ï¼";
        let photos = [...game1Library].sort(() => Math.random() - 0.5).slice(0, 6);
        let cards = [...photos, ...photos].sort(() => Math.random() - 0.5);
        cards.forEach(p => {
            const card = document.createElement('div');
            card.className = 'card'; card.dataset.photo = p; card.innerText = 'ï¼Ÿ';
            card.onclick = () => {
                if (g1Flipped.length < 2 && !card.classList.contains('flipped')) {
                    card.classList.add('flipped');
                    card.innerHTML = `<img src="${p}">`;
                    g1Flipped.push(card);
                    if (g1Flipped.length === 2) setTimeout(checkG1, 700);
                }
            };
            board.appendChild(card);
        });
    }

    function checkG1() {
        if (g1Flipped[0].dataset.photo === g1Flipped[1].dataset.photo) {
            g1Flipped.forEach(c => c.classList.add('matched'));
            g1Matched++;
            if (g1Matched === 6) document.getElementById('game1-status').innerText = "ğŸ‰ å…¬å…¬å©†å©†å¤ªæ£’äº†ï¼";
        } else {
            g1Flipped.forEach(c => { c.classList.remove('flipped'); c.innerText = 'ï¼Ÿ'; });
        }
        g1Flipped = [];
    }

    /* --- éŠæˆ²äºŒ --- */
    let selectedLeft = null;
    let g2Matched = 0;
    function initGame2() {
        const leftCol = document.getElementById('left-col');
        const rightCol = document.getElementById('right-col');
        leftCol.innerHTML = ''; rightCol.innerHTML = '';
        selectedLeft = null; g2Matched = 0;
        document.getElementById('game2-status').innerText = "æŠŠå°æ™‚å€™å’Œç¾åœ¨é€£èµ·ä¾†";
        let selected = [...game2Pairs].sort(() => Math.random() - 0.5).slice(0, 3);
        let leftData = [...selected].sort(() => Math.random() - 0.5);
        let rightData = [...selected].sort(() => Math.random() - 0.5);
        leftData.forEach(item => {
            const div = document.createElement('div'); div.className = 'match-item';
            div.innerHTML = `<img src="${item.child}">`;
            div.onclick = () => {
                document.querySelectorAll('#left-col .match-item').forEach(i => i.classList.remove('selected'));
                div.classList.add('selected'); selectedLeft = item.id;
            };
            leftCol.appendChild(div);
        });
        rightData.forEach(item => {
            const div = document.createElement('div'); div.className = 'match-item';
            div.innerHTML = `<img src="${item.adult}">`;
            div.onclick = () => {
                if (!selectedLeft) return;
                if (selectedLeft === item.id) {
                    div.classList.add('correct');
                    document.querySelector('#left-col .selected').classList.add('correct');
                    document.querySelector('#left-col .selected').classList.remove('selected');
                    selectedLeft = null; g2Matched++;
                    if (g2Matched === 3) document.getElementById('game2-status').innerText = "ğŸ‰ èªå¾—çœŸæº–ï¼å…¬å…¬å©†å©†å¥½å»ï¼";
                } else {
                    document.getElementById('game2-status').innerText = "ä¿‚æœ‰å•²ä¼¼æ¨£ï¼Œå†è©¦è©¦çœ‹ï¼";
                }
            };
            rightCol.appendChild(div);
        });
    }

    /* --- éŠæˆ²ä¸‰ --- */
    function initGame3() { albumIndex = 0; updateAlbum(); }
    function updateAlbum() {
        const item = albumLibrary[albumIndex];
        const img = document.getElementById('album-img');
        const video = document.getElementById('album-video');
        video.pause();
        if (item.type === 'video') {
            img.style.display = 'none';
            video.style.display = 'block';
            video.src = item.url;
        } else {
            video.style.display = 'none';
            img.style.display = 'block';
            img.src = item.url;
        }
        document.getElementById('album-text').innerText = item.desc;
    }
    function nextPhoto() { albumIndex = (albumIndex + 1) % albumLibrary.length; updateAlbum(); }
    function prevPhoto() { albumIndex = (albumIndex - 1 + albumLibrary.length) % albumLibrary.length; updateAlbum(); }
</script>
</body>
</html>